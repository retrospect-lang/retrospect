if prep {
  _ = test(0)
  _ = test(1)
  return test(2)
}
return test(5)

function test(n) = 1..n | -> #+3 | save

/* CODEGEN test RETURNS
[4, 5, 6, 7, 8]
---
test_x0(i1):
  1: CodeGenTarget.incrementCallCount(target:test_x0);
  2: test I1 < 0; T:→ 29
  3: test I1 == 0; T:→ 18
  4: test TState.reserveForChange(X0, *[]b0@xxxx, null, I1) == 0; T:→ 29
  5: X2 ← alloc*[]b0@xxxx(X0, I1);
  6: I3 ← 1;
= 7: I4 ← Math.addExact(I3, 1); ArithmeticException:→ 19
  8: I5 ← Math.addExact(I3, 3); ArithmeticException:→ 19
  9: test I3 < 1; T:→ 19
 10: test Frame1i2x.i0(X2) < I3; T:→ 19
 11: test I5 isUint8; F:→ 19
 12: setUint8[](Frame1i2x.x0(X2), iSub(I3, 1), I5);
 13: I3 ← I4;
 14: test I1 < I3; F:→ 7
=15: TState.setResultTemplates(X0, [x0:*[]@xxxx]);
 16: setObject[](TState.fnResults(X0, 1), 0, X2);
 17: return
-18: X2 ← []; → 15
-19: X4 ← newStackEntry(⟦CollectionCore.NextTransformedIterator.loop ∥ innerIt=RangeIterator(I3, I1, 0), it=TransformedIterator(ToBeSet, EnumerateAllKeys, lambda@8:26)⟧);
 20: X1 ← TState.fillStackEntry(X0, null, X4, ⟨⸨[[b0], b0]; Absent⸩, TransformedIterator(RangeIterator(b0, b0, 0), EnumerateAllKeys, lambda@8:26), SaverLoop(SaveElements), x0:*[]@xxxx⟩, lmMemo_4@xxxx, null);
 21: X3 ← newStackEntry(⟦LoopCore.Iterate.next ∥ loop=SaverLoop(SaveElements), state=X2⟧);
 22: X1 ← TState.fillStackEntry(X0, X1, X3, ⟨x0:*[]@xxxx, SaverLoop(SaveElements)⟩, lmMemo_10@xxxx, null);
 23: X1 ← TState.fillStackEntry(X0, X1, ⟦LoopCore.enumerateDefault⟧, ⟨x0:*[]@xxxx, SaverLoop(SaveElements)⟩, mMemo_11@xxxx, null);
 24: X1 ← TState.fillStackEntry(X0, X1, ⟦LoopCore.PipeCollectionCollector.enumerate ∥ loop=SaverLoop(SaveElements)⟧, ⟨x0:*[]@xxxx⟩, mMemo_19@xxxx, null);
 25: X1 ← TState.fillStackEntry(X0, X1, ⟦simple_save.r8t+0:8_3 _t0 = pipe(_t0, _t1)⟧, ⟨x0:*[]@xxxx⟩, mMemo_x@xxxx, null);
=26: TState.setStackRest(X0, X1);
 27: TState.setUnwoundFrom(X0, target:test_x0);
 28: return
-29: X2 ← newStackEntry(⟦simple_save.r8t+0:8_0 _t0 = range(1, n) ∥ n=I1⟧);
 30: X1 ← TState.fillStackEntry(X0, null, X2, ⟨x0:*[]@xxxx⟩, mMemo_x@xxxx, null); → 26
---
allocated=128/5, peak=56
*/
